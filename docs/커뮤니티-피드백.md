# ì»¤ë®¤ë‹ˆí‹° í”¼ë“œë°± ì‹œìŠ¤í…œ

## ê°œìš”

í”„ë¡œì íŠ¸ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì‚¬ìš©ìê°€ ë²„ê·¸ ë¦¬í¬íŠ¸, ê¸°ëŠ¥ ìš”ì²­, ê°œì„  ì œì•ˆ, ì§ˆë¬¸ ë“±ì˜ í”¼ë“œë°±ì„ ì‘ì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ëª¨ë“  ì‚¬ìš©ìê°€ í”¼ë“œë°±ì„ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©°, í”„ë¡œì íŠ¸ ê°œë°œíŒ€ì€ í”¼ë“œë°±ì„ ê´€ë¦¬í•˜ê³  ê³µì‹ ë‹µë³€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- **í”¼ë“œë°± ì‘ì„±/ìˆ˜ì •/ì‚­ì œ**: ë²„ê·¸ ë¦¬í¬íŠ¸, ê¸°ëŠ¥ ìš”ì²­, ê°œì„  ì œì•ˆ, ì§ˆë¬¸ ì‘ì„±
- **í”¼ë“œë°± ê´€ë¦¬**: ìƒíƒœ ë³€ê²½, ìš°ì„ ìˆœìœ„ ì„¤ì •, ë‹´ë‹¹ì ì§€ì •
- **ê³µì‹ ë‹µë³€**: ê°œë°œíŒ€ì´ í”¼ë“œë°±ì— ëŒ€í•œ ê°œë°œì ë‹µë³€ ì‘ì„±
- **íˆ¬í‘œ ê¸°ëŠ¥**: ì‚¬ìš©ìê°€ í”¼ë“œë°±ì— íˆ¬í‘œí•˜ì—¬ ì¸ê¸° í”¼ë“œë°± í™•ì¸
- **ì´ë¯¸ì§€ ì²¨ë¶€**: ìµœëŒ€ 3ê°œ ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥
- **ëŒ“ê¸€ ì‹œìŠ¤í…œ**: í”¼ë“œë°±ë³„ ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ (ìµœëŒ€ 3ë‹¨ê³„ ê¹Šì´)
- **í•„í„°ë§**: íƒ€ì…ë³„, ìƒíƒœë³„ í•„í„°ë§
- **ì •ë ¬**: íˆ¬í‘œìˆ˜ ìˆœ, ìµœì‹ ìˆœ ì •ë ¬
- **í˜ì´ì§€ë„¤ì´ì…˜**: 30ê°œì”© í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›
- **ìƒì„¸ í˜ì´ì§€**: í”¼ë“œë°± ìƒì„¸ ì •ë³´ ì¡°íšŒ ë° ê´€ë¦¬

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 1. í”¼ë“œë°± í…Œì´ë¸” (`odd.tbl_feedbacks`)

í”¼ë“œë°±ì„ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤. `tbl_posts`ì™€ 1:1 ê´€ê³„ì…ë‹ˆë‹¤.

#### ìŠ¤í‚¤ë§ˆ

```sql
CREATE TABLE odd.tbl_feedbacks (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    post_id uuid NOT NULL REFERENCES odd.tbl_posts(id) ON DELETE CASCADE,
    
    -- í”¼ë“œë°± ì •ë³´
    title text NOT NULL,  -- ì œëª©
    feedback_type text NOT NULL CHECK (feedback_type IN ('bug', 'feature', 'improvement', 'question')),  -- í”¼ë“œë°± íƒ€ì…
    status text NOT NULL DEFAULT 'open' CHECK (status IN ('open', 'in_progress', 'resolved', 'closed')),  -- ìƒíƒœ
    priority text CHECK (priority IN ('low', 'medium', 'high', 'critical')),  -- ìš°ì„ ìˆœìœ„
    
    -- ë‹´ë‹¹ì ë° ë‹µë³€
    assignee_id bigint REFERENCES odd.tbl_users(id) ON DELETE SET NULL,  -- ë‹´ë‹¹ì
    developer_response text,  -- ê°œë°œíŒ€ ê³µì‹ ë‹µë³€
    
    -- ìƒíƒœ
    is_pinned boolean DEFAULT false NOT NULL,
    
    -- í†µê³„ (ë¹„ì •ê·œí™”)
    votes_count integer DEFAULT 0 NOT NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at timestamptz DEFAULT now() NOT NULL,
    updated_at timestamptz DEFAULT now() NOT NULL,
    
    -- í•˜ë‚˜ì˜ í¬ìŠ¤íŠ¸ëŠ” í•˜ë‚˜ì˜ í”¼ë“œë°±ë§Œ ê°€ì§ˆ ìˆ˜ ìˆìŒ
    UNIQUE(post_id)
);
```

#### ì£¼ìš” ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `id` | uuid | âœ… | ê³ ìœ  ID (ìë™ ìƒì„±) |
| `post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID (`odd.tbl_posts.id` ì°¸ì¡°) |
| `title` | text | âœ… | ì œëª© |
| `feedback_type` | text | âœ… | í”¼ë“œë°± íƒ€ì…: `bug`, `feature`, `improvement`, `question` |
| `status` | text | âœ… | ìƒíƒœ: `open`, `in_progress`, `resolved`, `closed` (ê¸°ë³¸ê°’: `open`) |
| `priority` | text | - | ìš°ì„ ìˆœìœ„: `low`, `medium`, `high`, `critical` |
| `assignee_id` | bigint | - | ë‹´ë‹¹ì ID (`odd.tbl_users.id` ì°¸ì¡°) |
| `developer_response` | text | - | ê°œë°œíŒ€ ê³µì‹ ë‹µë³€ |
| `is_pinned` | boolean | âœ… | ìƒë‹¨ ê³ ì • ì—¬ë¶€ |
| `votes_count` | integer | âœ… | íˆ¬í‘œ ìˆ˜ (ë¹„ì •ê·œí™”, íŠ¸ë¦¬ê±°ë¡œ ìë™ ë™ê¸°í™”) |
| `created_at` | timestamptz | âœ… | ìƒì„±ì¼ì‹œ |
| `updated_at` | timestamptz | âœ… | ìˆ˜ì •ì¼ì‹œ (íŠ¸ë¦¬ê±°ë¡œ ìë™ ì—…ë°ì´íŠ¸) |

#### ì¸ë±ìŠ¤

| ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | ìš©ë„ |
|---------|------|------|
| `idx_tbl_feedbacks_post_id` | `post_id` | í¬ìŠ¤íŠ¸ IDë¡œ ì¡°íšŒ |
| `idx_tbl_feedbacks_type` | `feedback_type` | í”¼ë“œë°± íƒ€ì…ë³„ ì¡°íšŒ |
| `idx_tbl_feedbacks_status` | `status` | ìƒíƒœë³„ ì¡°íšŒ |
| `idx_tbl_feedbacks_priority` | `priority` (WHERE `priority IS NOT NULL`) | ìš°ì„ ìˆœìœ„ë³„ ì¡°íšŒ |
| `idx_tbl_feedbacks_assignee` | `assignee_id` (WHERE `assignee_id IS NOT NULL`) | ë‹´ë‹¹ìë³„ ì¡°íšŒ |
| `idx_tbl_feedbacks_pinned` | `is_pinned` (WHERE `is_pinned = true`) | ê³ ì •ëœ í”¼ë“œë°± ì¡°íšŒ |
| `idx_tbl_feedbacks_votes` | `votes_count DESC` | íˆ¬í‘œìˆ˜ ì •ë ¬ (ì¸ê¸°ìˆœ) |

---

### 2. í”¼ë“œë°± íˆ¬í‘œ í…Œì´ë¸” (`odd.tbl_feedback_votes`)

í”¼ë“œë°± íˆ¬í‘œë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤. í•œ ì‚¬ìš©ìëŠ” í•œ í”¼ë“œë°±ì— í•˜ë‚˜ì˜ íˆ¬í‘œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### ìŠ¤í‚¤ë§ˆ

```sql
CREATE TABLE odd.tbl_feedback_votes (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    feedback_id uuid NOT NULL REFERENCES odd.tbl_feedbacks(id) ON DELETE CASCADE,
    user_id bigint NOT NULL REFERENCES odd.tbl_users(id) ON DELETE CASCADE,
    
    created_at timestamptz DEFAULT now() NOT NULL,
    
    -- í•œ ì‚¬ìš©ìëŠ” í•œ í”¼ë“œë°±ì— í•˜ë‚˜ì˜ íˆ¬í‘œë§Œ ê°€ëŠ¥
    UNIQUE(feedback_id, user_id)
);
```

#### ì£¼ìš” ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `id` | uuid | âœ… | ê³ ìœ  ID (ìë™ ìƒì„±) |
| `feedback_id` | uuid | âœ… | í”¼ë“œë°± ID (`odd.tbl_feedbacks.id` ì°¸ì¡°) |
| `user_id` | bigint | âœ… | íˆ¬í‘œí•œ ì‚¬ìš©ì ID (`odd.tbl_users.id` ì°¸ì¡°) |
| `created_at` | timestamptz | âœ… | ìƒì„±ì¼ì‹œ |

#### ì¸ë±ìŠ¤

| ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | ìš©ë„ |
|---------|------|------|
| `idx_tbl_feedback_votes_feedback_id` | `feedback_id` | í”¼ë“œë°±ë³„ íˆ¬í‘œ ì¡°íšŒ |
| `idx_tbl_feedback_votes_user_id` | `user_id` | ì‚¬ìš©ìë³„ íˆ¬í‘œ ì¡°íšŒ |

#### íŠ¸ë¦¬ê±°

- **`trigger_increment_feedback_votes_count`**: í”¼ë“œë°± íˆ¬í‘œ ì¶”ê°€ ì‹œ í”¼ë“œë°±ì˜ `votes_count` ì¦ê°€
- **`trigger_decrement_feedback_votes_count`**: í”¼ë“œë°± íˆ¬í‘œ ì‚­ì œ ì‹œ í”¼ë“œë°±ì˜ `votes_count` ê°ì†Œ

---

## RPC í•¨ìˆ˜

### 1. í”¼ë“œë°± ëª©ë¡ ì¡°íšŒ (`odd.v1_fetch_feedbacks`)

í”¼ë“œë°± ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. í•„í„°ë§, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_fetch_feedbacks(
    p_project_id uuid,
    p_feedback_type text DEFAULT NULL,
    p_status text DEFAULT NULL,
    p_limit integer DEFAULT 30,
    p_offset integer DEFAULT 0
)
RETURNS TABLE (
    -- í¬ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´
    id uuid,
    author_id bigint,
    type text,
    content text,
    images jsonb,
    likes_count integer,
    comments_count integer,
    is_pinned boolean,
    created_at timestamptz,
    updated_at timestamptz,
    -- ì‘ì„±ì ì •ë³´
    author_username text,
    author_display_name text,
    author_avatar_url text,
    -- í˜„ì¬ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ìƒíƒœ
    is_liked boolean,
    -- í”¼ë“œë°± ì •ë³´
    post_id uuid,
    feedback_id uuid,
    title text,
    feedback_type text,
    status text,
    priority text,
    assignee_id bigint,
    developer_response text,
    votes_count integer,
    is_voted boolean
)
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_project_id` | uuid | âœ… | í”„ë¡œì íŠ¸ ID |
| `p_feedback_type` | text | - | í”¼ë“œë°± íƒ€ì… í•„í„°: `bug`, `feature`, `improvement`, `question` (NULLì´ë©´ ëª¨ë“  íƒ€ì…) |
| `p_status` | text | - | ìƒíƒœ í•„í„°: `open`, `in_progress`, `resolved`, `closed` (NULLì´ë©´ ëª¨ë“  ìƒíƒœ) |
| `p_limit` | integer | - | ì¡°íšŒ ê°œìˆ˜ ì œí•œ (ê¸°ë³¸ê°’: 30, ìµœëŒ€: 100) |
| `p_offset` | integer | - | í˜ì´ì§€ë„¤ì´ì…˜ ì˜¤í”„ì…‹ (ê¸°ë³¸ê°’: 0) |

#### ë°˜í™˜ ë°ì´í„° êµ¬ì¡°

```typescript
interface Feedback {
  // í¬ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´
  id: string; // post_id
  feedbackId: string; // ì‹¤ì œ feedback_id
  author_id: number;
  type: string;
  content: string;
  images: string[];
  likes_count: number;
  comments_count: number;
  is_pinned: boolean;
  created_at: string;
  updated_at: string;
  
  // ì‘ì„±ì ì •ë³´
  author_username: string;
  author_display_name: string;
  author_avatar_url?: string;
  
  // í˜„ì¬ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ìƒíƒœ
  is_liked: boolean;
  
  // í”¼ë“œë°± ì •ë³´
  title: string;
  feedback_type: 'bug' | 'feature' | 'improvement' | 'question';
  status: 'open' | 'in_progress' | 'resolved' | 'closed';
  priority?: 'low' | 'medium' | 'high' | 'critical';
  assignee_id?: number;
  developer_response?: string;
  votes_count: number;
  is_voted: boolean;
}
```

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// ì „ì²´ í”¼ë“œë°± ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_feedbacks', {
    p_project_id: 'project-uuid-here',
    p_limit: 30,
    p_offset: 0
  });

// ê¸°ëŠ¥ ìš”ì²­ë§Œ ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_feedbacks', {
    p_project_id: 'project-uuid-here',
    p_feedback_type: 'feature',
    p_limit: 30,
    p_offset: 0
  });

// ì§„í–‰ ì¤‘ì¸ í”¼ë“œë°±ë§Œ ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_feedbacks', {
    p_project_id: 'project-uuid-here',
    p_status: 'in_progress',
    p_limit: 30,
    p_offset: 0
  });
```

#### ì •ë ¬ ê·œì¹™

1. ê³ ì •ëœ í”¼ë“œë°±ì„ ë¨¼ì € í‘œì‹œ (`is_pinned DESC`)
2. íˆ¬í‘œìˆ˜ ë†’ì€ ìˆœ (ì¸ê¸°ìˆœ) (`votes_count DESC`)
3. ìµœì‹ ìˆœ ì •ë ¬ (`created_at DESC`)

---

### 2. í”¼ë“œë°± ìƒì„¸ ì¡°íšŒ (`odd.v1_fetch_feedback_detail`)

íŠ¹ì • í”¼ë“œë°±ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_fetch_feedback_detail(
    p_post_id uuid
)
RETURNS TABLE (
    -- í¬ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´
    id uuid,
    author_id bigint,
    type text,
    content text,
    images jsonb,
    likes_count integer,
    comments_count integer,
    is_pinned boolean,
    created_at timestamptz,
    updated_at timestamptz,
    -- ì‘ì„±ì ì •ë³´
    author_username text,
    author_display_name text,
    author_avatar_url text,
    -- í˜„ì¬ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ìƒíƒœ
    is_liked boolean,
    -- í”¼ë“œë°± ì •ë³´
    post_id uuid,
    feedback_id uuid,
    title text,
    feedback_type text,
    status text,
    priority text,
    assignee_id bigint,
    developer_response text,
    votes_count integer,
    is_voted boolean
)
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID (feedbackIdëŠ” post_idì™€ ë™ì¼) |

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// í”¼ë“œë°± ìƒì„¸ ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_feedback_detail', {
    p_post_id: 'post-uuid-here'
  });
```

---

### 3. í”¼ë“œë°± ìƒì„± (`odd.v1_create_feedback`)

í”¼ë“œë°±ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì™€ í”¼ë“œë°± ì •ë³´ë¥¼ í•¨ê»˜ ìƒì„±í•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_create_feedback(
    p_project_id uuid,
    p_feedback_type text,  -- 'bug' | 'feature' | 'improvement' | 'question'
    p_title text,
    p_content text,
    p_images jsonb DEFAULT '[]'::jsonb
)
RETURNS uuid
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_project_id` | uuid | âœ… | í”„ë¡œì íŠ¸ ID |
| `p_feedback_type` | text | âœ… | í”¼ë“œë°± íƒ€ì…: `bug`, `feature`, `improvement`, `question` |
| `p_title` | text | âœ… | ì œëª© |
| `p_content` | text | âœ… | ë‚´ìš© |
| `p_images` | jsonb | - | ì´ë¯¸ì§€ URL ë°°ì—´ (ìµœëŒ€ 3ê°œ) |

#### ê²€ì¦ ê·œì¹™

- í”¼ë“œë°± íƒ€ì…ì´ ìœ íš¨í•œì§€ í™•ì¸ (`bug`, `feature`, `improvement`, `question`)
- ì´ë¯¸ì§€ ê°œìˆ˜ê°€ 3ê°œ ì´í•˜ì¸ì§€ í™•ì¸
- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ í”¼ë“œë°± ìƒì„± ê°€ëŠ¥

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// í”¼ë“œë°± ìƒì„±
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_create_feedback', {
    p_project_id: 'project-uuid-here',
    p_feedback_type: 'feature',
    p_title: 'ë‹¤í¬ëª¨ë“œ ì§€ì› ìš”ì²­',
    p_content: 'ë‹¤í¬ëª¨ë“œ ê¸°ëŠ¥ì´ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.',
    p_images: ['url1', 'url2']
  });
```

---

### 4. í”¼ë“œë°± ìˆ˜ì • (`odd.v1_update_feedback`)

í”¼ë“œë°±ì„ ìˆ˜ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì‘ì„±ìëŠ” ì œëª©, ë‚´ìš©, ì´ë¯¸ì§€ë§Œ ìˆ˜ì • ê°€ëŠ¥í•˜ê³ , í”„ë¡œì íŠ¸ ë©¤ë²„ëŠ” ëª¨ë“  í•„ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_update_feedback(
    p_post_id uuid,
    p_title text DEFAULT NULL,
    p_content text DEFAULT NULL,
    p_images jsonb DEFAULT NULL,
    p_feedback_type text DEFAULT NULL,
    p_status text DEFAULT NULL,
    p_priority text DEFAULT NULL,
    p_assignee_id bigint DEFAULT NULL,
    p_developer_response text DEFAULT NULL,
    p_is_pinned boolean DEFAULT NULL
)
RETURNS boolean
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID |
| `p_title` | text | - | ì œëª© (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_content` | text | - | ë‚´ìš© (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_images` | jsonb | - | ì´ë¯¸ì§€ URL ë°°ì—´ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_feedback_type` | text | - | í”¼ë“œë°± íƒ€ì… (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_status` | text | - | ìƒíƒœ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_priority` | text | - | ìš°ì„ ìˆœìœ„ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_assignee_id` | bigint | - | ë‹´ë‹¹ì ID (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_developer_response` | text | - | ê³µì‹ ë‹µë³€ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_is_pinned` | boolean | - | ìƒë‹¨ ê³ ì • ì—¬ë¶€ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |

#### ê¶Œí•œ

- ì‘ì„±ì: ì œëª©, ë‚´ìš©, ì´ë¯¸ì§€ë§Œ ìˆ˜ì • ê°€ëŠ¥
- í”„ë¡œì íŠ¸ ë©¤ë²„: ëª¨ë“  í•„ë“œ ìˆ˜ì • ê°€ëŠ¥

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// ì‘ì„±ìê°€ í”¼ë“œë°± ìˆ˜ì •
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_update_feedback', {
    p_post_id: 'post-uuid-here',
    p_title: 'ìˆ˜ì •ëœ ì œëª©',
    p_content: 'ìˆ˜ì •ëœ ë‚´ìš©',
    p_images: ['url1', 'url2', 'url3']
  });

// í”„ë¡œì íŠ¸ ë©¤ë²„ê°€ ìƒíƒœ ë³€ê²½
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_update_feedback', {
    p_post_id: 'post-uuid-here',
    p_status: 'in_progress',
    p_priority: 'high',
    p_assignee_id: 123,
    p_developer_response: 'ê²€í†  ì¤‘ì…ë‹ˆë‹¤.'
  });
```

---

### 5. í”¼ë“œë°± íˆ¬í‘œ í† ê¸€ (`odd.v1_toggle_feedback_vote`)

í”¼ë“œë°± íˆ¬í‘œë¥¼ í† ê¸€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ë¯¸ íˆ¬í‘œí•œ ê²½ìš° ì·¨ì†Œí•˜ê³ , íˆ¬í‘œí•˜ì§€ ì•Šì€ ê²½ìš° íˆ¬í‘œí•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_toggle_feedback_vote(
    p_feedback_id uuid
)
RETURNS boolean
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_feedback_id` | uuid | âœ… | í”¼ë“œë°± ID |

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// í”¼ë“œë°± íˆ¬í‘œ í† ê¸€
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_toggle_feedback_vote', {
    p_feedback_id: 'feedback-uuid-here'
  });
```

---

## í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš© ë°©ë²•

### 1. í”¼ë“œë°± ëª©ë¡ ì¡°íšŒ

```typescript
import { supabase } from "@/shared/lib/supabase";

async function fetchFeedbacks(projectId: string, options?: {
  feedbackType?: 'bug' | 'feature' | 'improvement' | 'question';
  status?: 'open' | 'in_progress' | 'resolved' | 'closed';
  limit?: number;
  offset?: number;
}) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_fetch_feedbacks', {
      p_project_id: projectId,
      p_feedback_type: options?.feedbackType || null,
      p_status: options?.status || null,
      p_limit: options?.limit || 30,
      p_offset: options?.offset || 0
    });

  if (error) {
    console.error('í”¼ë“œë°± ì¡°íšŒ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 2. í”¼ë“œë°± ìƒì„¸ ì¡°íšŒ

```typescript
import { supabase } from "@/shared/lib/supabase";

async function fetchFeedbackDetail(postId: string) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_fetch_feedback_detail', {
      p_post_id: postId
    });

  if (error) {
    console.error('í”¼ë“œë°± ìƒì„¸ ì¡°íšŒ ì‹¤íŒ¨:', error);
    return { error };
  }

  if (!data || data.length === 0) {
    return { error: new Error('í”¼ë“œë°±ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤') };
  }

  return { data: data[0] };
}
```

### 3. í”¼ë“œë°± ìƒì„±

```typescript
import { supabase } from "@/shared/lib/supabase";
import { uploadPostImages } from "@/shared/lib/storage";

async function createFeedback(feedbackData: {
  projectId: string;
  feedbackType: 'bug' | 'feature' | 'improvement' | 'question';
  title: string;
  content: string;
  images?: File[];
}) {
  // ì´ë¯¸ì§€ ì—…ë¡œë“œ
  let imagePaths: string[] = [];
  if (feedbackData.images && feedbackData.images.length > 0) {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
      return { error: new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') };
    }

    const tempPostId = `temp-${Date.now()}`;
    const { paths, error: uploadError } = await uploadPostImages(
      feedbackData.images,
      user.id,
      tempPostId
    );

    if (uploadError) {
      return { error: uploadError };
    }

    imagePaths = paths;
  }

  // í”¼ë“œë°± ìƒì„±
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_create_feedback', {
      p_project_id: feedbackData.projectId,
      p_feedback_type: feedbackData.feedbackType,
      p_title: feedbackData.title,
      p_content: feedbackData.content,
      p_images: imagePaths
    });

  if (error) {
    console.error('í”¼ë“œë°± ìƒì„± ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 4. í”¼ë“œë°± ìˆ˜ì •

```typescript
import { supabase } from "@/shared/lib/supabase";

async function updateFeedback(postId: string, updates: {
  title?: string;
  content?: string;
  images?: string[];
  feedbackType?: 'bug' | 'feature' | 'improvement' | 'question';
  status?: 'open' | 'in_progress' | 'resolved' | 'closed';
  priority?: 'low' | 'medium' | 'high' | 'critical';
  assigneeId?: number;
  developerResponse?: string;
  isPinned?: boolean;
}) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_update_feedback', {
      p_post_id: postId,
      p_title: updates.title || null,
      p_content: updates.content || null,
      p_images: updates.images || null,
      p_feedback_type: updates.feedbackType || null,
      p_status: updates.status || null,
      p_priority: updates.priority || null,
      p_assignee_id: updates.assigneeId || null,
      p_developer_response: updates.developerResponse || null,
      p_is_pinned: updates.isPinned !== undefined ? updates.isPinned : null
    });

  if (error) {
    console.error('í”¼ë“œë°± ìˆ˜ì • ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 5. í”¼ë“œë°± ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ)

```typescript
import { supabase } from "@/shared/lib/supabase";

async function deleteFeedback(postId: string) {
  const { error } = await supabase
    .schema('odd')
    .from('tbl_posts')
    .update({ is_deleted: true })
    .eq('id', postId);

  if (error) {
    console.error('í”¼ë“œë°± ì‚­ì œ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { success: true };
}
```

### 6. í”¼ë“œë°± íˆ¬í‘œ í† ê¸€

```typescript
import { supabase } from "@/shared/lib/supabase";

async function toggleFeedbackVote(feedbackId: string) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_toggle_feedback_vote', {
      p_feedback_id: feedbackId
    });

  if (error) {
    console.error('í”¼ë“œë°± íˆ¬í‘œ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

---

## UI/UX ê°€ì´ë“œë¼ì¸

### í”¼ë“œë°± íƒ€ì…ë³„ í‘œì‹œ

#### ë²„ê·¸ ë¦¬í¬íŠ¸ (Bug)
- ì•„ì´ì½˜: ğŸ› (Bug)
- ìƒ‰ìƒ: Rose ìƒ‰ìƒ
- ë°°ì§€: "ë²„ê·¸" ë°°ì§€ í‘œì‹œ

#### ê¸°ëŠ¥ ìš”ì²­ (Feature)
- ì•„ì´ì½˜: ğŸ’¡ (Lightbulb)
- ìƒ‰ìƒ: Amber ìƒ‰ìƒ
- ë°°ì§€: "ê¸°ëŠ¥ ìš”ì²­" ë°°ì§€ í‘œì‹œ

#### ê°œì„  ì œì•ˆ (Improvement)
- ì•„ì´ì½˜: âœ¨ (Sparkles)
- ìƒ‰ìƒ: Primary ìƒ‰ìƒ
- ë°°ì§€: "ê°œì„  ì œì•ˆ" ë°°ì§€ í‘œì‹œ

#### ì§ˆë¬¸ (Question)
- ì•„ì´ì½˜: ğŸ’¬ (MessageSquareText)
- ìƒ‰ìƒ: Blue ìƒ‰ìƒ
- ë°°ì§€: "ì§ˆë¬¸" ë°°ì§€ í‘œì‹œ

### ìƒíƒœë³„ í‘œì‹œ

#### ì ‘ìˆ˜ë¨ (Open)
- ìƒ‰ìƒ: Surface ìƒ‰ìƒ
- ë°°ì§€: "ì ‘ìˆ˜ë¨" ë°°ì§€ í‘œì‹œ

#### ì§„í–‰ ì¤‘ (In Progress)
- ìƒ‰ìƒ: Primary ìƒ‰ìƒ
- ë°°ì§€: "ì§„í–‰ ì¤‘" ë°°ì§€ í‘œì‹œ

#### í•´ê²°ë¨ (Resolved)
- ìƒ‰ìƒ: Emerald ìƒ‰ìƒ
- ë°°ì§€: "í•´ê²°ë¨" ë°°ì§€ í‘œì‹œ

#### ë‹«í˜ (Closed)
- ìƒ‰ìƒ: Surface ìƒ‰ìƒ
- ë°°ì§€: "ë‹«í˜" ë°°ì§€ í‘œì‹œ

### ìš°ì„ ìˆœìœ„ë³„ í‘œì‹œ

#### ë‚®ìŒ (Low)
- ìƒ‰ìƒ: Surface ìƒ‰ìƒ

#### ë³´í†µ (Medium)
- ìƒ‰ìƒ: Blue ìƒ‰ìƒ

#### ë†’ìŒ (High)
- ìƒ‰ìƒ: Amber ìƒ‰ìƒ

#### ê¸´ê¸‰ (Critical)
- ìƒ‰ìƒ: Rose ìƒ‰ìƒ

### ê³µì‹ ë‹µë³€ í‘œì‹œ

- ê³µì‹ ë‹µë³€ì€ í”¼ë“œë°± ìƒë‹¨ì— ê°•ì¡°ë˜ì–´ í‘œì‹œ
- Primary ìƒ‰ìƒ ë°°ê²½ ì‚¬ìš©
- ê°œë°œíŒ€ ì•„ì´ì½˜ í‘œì‹œ

### ëŒ“ê¸€ ì‹œìŠ¤í…œ

- í”¼ë“œë°±ë³„ ëŒ“ê¸€ ì‹œìŠ¤í…œ ì‚¬ìš© (`useDevFeedComments` hook)
- ìµœëŒ€ 3ë‹¨ê³„ ê¹Šì´ì˜ ì¤‘ì²© ëŒ“ê¸€ ì§€ì›
- ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥ (ìµœëŒ€ 1ì¥)
- ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ/ì¢‹ì•„ìš” ê¸°ëŠ¥

---

## ë³´ì•ˆ ë° ê¶Œí•œ (RLS)

### í”¼ë“œë°± í…Œì´ë¸” (`odd.tbl_feedbacks`)

#### ì½ê¸° ê¶Œí•œ
- ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ
- ì •ì±…: `"Anyone can read feedbacks"` (SELECT, TO public)

#### ì“°ê¸° ê¶Œí•œ

**í”¼ë“œë°± ìƒì„± (INSERT):**
- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ í”¼ë“œë°± ìƒì„± ê°€ëŠ¥
- ì •ì±…: `"Authenticated users can create feedbacks"` (INSERT, TO authenticated)

**í”¼ë“œë°± ìˆ˜ì • (UPDATE):**
- ì‘ì„±ìëŠ” ì œëª©, ë‚´ìš©, ì´ë¯¸ì§€ë§Œ ìˆ˜ì • ê°€ëŠ¥
- í”„ë¡œì íŠ¸ ë©¤ë²„ëŠ” ëª¨ë“  í•„ë“œ ìˆ˜ì • ê°€ëŠ¥
- ì •ì±…: `"Users can update own feedbacks"` (UPDATE, TO authenticated)
- ê¶Œí•œ ì²´í¬ëŠ” í•¨ìˆ˜ì—ì„œ ìˆ˜í–‰

### í”¼ë“œë°± íˆ¬í‘œ í…Œì´ë¸” (`odd.tbl_feedback_votes`)

#### ì½ê¸° ê¶Œí•œ
- ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ
- ì •ì±…: `"Anyone can read feedback votes"` (SELECT, TO public)

#### ì“°ê¸° ê¶Œí•œ
- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íˆ¬í‘œ ê°€ëŠ¥
- ìì‹ ì˜ íˆ¬í‘œë§Œ ì‚­ì œ ê°€ëŠ¥
- ì •ì±…: `"Authenticated users can create feedback votes"` (INSERT, TO authenticated)
- ì •ì±…: `"Users can delete own feedback votes"` (DELETE, TO authenticated)

---

## ì—ëŸ¬ ì²˜ë¦¬

### ì¼ë°˜ì ì¸ ì—ëŸ¬

#### ì¸ì¦ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤"`
- **ì›ì¸**: ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ ì¸ì¦ì´ í•„ìš”í•œ ì‘ì—…ì„ ì‹œë„
- **í•´ê²°**: ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

#### ê¶Œí•œ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"í”¼ë“œë°±ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ìˆ˜ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"`
- **ì›ì¸**: ì‘ì„±ìê°€ ì•„ë‹Œ ì‚¬ìš©ìê°€ ìˆ˜ì • ì‹œë„ ë˜ëŠ” í”„ë¡œì íŠ¸ ë©¤ë²„ê°€ ì•„ë‹Œ ì‚¬ìš©ìê°€ ê´€ë¦¬ ê¸°ëŠ¥ ì‹œë„
- **í•´ê²°**: ê¶Œí•œ í™•ì¸ í›„ ì‘ì—… ìˆ˜í–‰

### í”¼ë“œë°± ê´€ë ¨ ì—ëŸ¬

#### í”¼ë“œë°± íƒ€ì… ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ìœ íš¨í•˜ì§€ ì•Šì€ í”¼ë“œë°± íƒ€ì…ì…ë‹ˆë‹¤: {type}"`
- **ì›ì¸**: í—ˆìš©ë˜ì§€ ì•Šì€ í”¼ë“œë°± íƒ€ì… ì‚¬ìš©
- **í•´ê²°**: ìœ íš¨í•œ íƒ€ì… ì‚¬ìš©: `bug`, `feature`, `improvement`, `question`

#### ìƒíƒœ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ìœ íš¨í•˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤: {status}"`
- **ì›ì¸**: í—ˆìš©ë˜ì§€ ì•Šì€ ìƒíƒœ ì‚¬ìš©
- **í•´ê²°**: ìœ íš¨í•œ ìƒíƒœ ì‚¬ìš©: `open`, `in_progress`, `resolved`, `closed`

#### ì´ë¯¸ì§€ ê°œìˆ˜ ì´ˆê³¼
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 3ì¥ê¹Œì§€ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"`
- **ì›ì¸**: í”¼ë“œë°±ì— 4ì¥ ì´ìƒì˜ ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œë„
- **í•´ê²°**: ì´ë¯¸ì§€ ê°œìˆ˜ ì œí•œ ì¤€ìˆ˜

---

## ë°ì´í„° íë¦„

### í”¼ë“œë°± ìƒì„± íë¦„

```
1. ì‚¬ìš©ìê°€ í”¼ë“œë°± ì‘ì„± í¼ ì œì¶œ
   â†“
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„ íƒ)
   â†“
3. v1_create_feedback RPC í•¨ìˆ˜ í˜¸ì¶œ
   â†“
4. ì¸ì¦ í™•ì¸ (auth.uid())
   â†“
5. ì‚¬ìš©ì ID ì¡°íšŒ (tbl_users)
   â†“
6. ë°ì´í„° ê²€ì¦ (íƒ€ì…, ì´ë¯¸ì§€ ê°œìˆ˜ ë“±)
   â†“
7. í¬ìŠ¤íŠ¸ ìƒì„± (tbl_posts INSERT)
   â†“
8. í”¼ë“œë°± ì •ë³´ ìƒì„± (tbl_feedbacks INSERT)
   â†“
9. í¬ìŠ¤íŠ¸ ID ë°˜í™˜
   â†“
10. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í”¼ë“œë°± ëª©ë¡ ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
```

### í”¼ë“œë°± íˆ¬í‘œ íë¦„

```
1. ì‚¬ìš©ìê°€ íˆ¬í‘œ ë²„íŠ¼ í´ë¦­
   â†“
2. v1_toggle_feedback_vote RPC í•¨ìˆ˜ í˜¸ì¶œ
   â†“
3. ì¸ì¦ í™•ì¸ (auth.uid())
   â†“
4. ì‚¬ìš©ì ID ì¡°íšŒ (tbl_users)
   â†“
5. í˜„ì¬ íˆ¬í‘œ ìƒíƒœ í™•ì¸
   â†“
6. íˆ¬í‘œ ì¶”ê°€ ë˜ëŠ” ì œê±°
   â†“
7. íŠ¸ë¦¬ê±° ì‹¤í–‰:
   - votes_count ì¦ê°€ ë˜ëŠ” ê°ì†Œ
   â†“
8. ì„±ê³µ ì—¬ë¶€ ë°˜í™˜
   â†“
9. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ íˆ¬í‘œ ìˆ˜ ì—…ë°ì´íŠ¸
```

### í”¼ë“œë°± ìˆ˜ì • íë¦„ (í”„ë¡œì íŠ¸ ë©¤ë²„)

```
1. í”„ë¡œì íŠ¸ ë©¤ë²„ê°€ í”¼ë“œë°± ìˆ˜ì • í¼ ì œì¶œ
   â†“
2. v1_update_feedback RPC í•¨ìˆ˜ í˜¸ì¶œ
   â†“
3. ì¸ì¦ í™•ì¸ (auth.uid())
   â†“
4. ì‚¬ìš©ì ID ì¡°íšŒ (tbl_users)
   â†“
5. í”„ë¡œì íŠ¸ ë©¤ë²„ í™•ì¸
   â†“
6. í”¼ë“œë°± ì •ë³´ ìˆ˜ì • (tbl_feedbacks UPDATE)
   â†“
7. í¬ìŠ¤íŠ¸ ì •ë³´ ìˆ˜ì • (í•„ìš”í•œ ê²½ìš°, tbl_posts UPDATE)
   â†“
8. ì„±ê³µ ì—¬ë¶€ ë°˜í™˜
   â†“
9. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í”¼ë“œë°± ì •ë³´ ì—…ë°ì´íŠ¸
```

---

## ê´€ë ¨ íŒŒì¼

### SQL íŒŒì¼

- `docs/sql/023_create_community_tables.sql` - ì»¤ë®¤ë‹ˆí‹° í…Œì´ë¸” ìƒì„±
- `docs/sql/026_v1_feedback_functions.sql` - í”¼ë“œë°± í•¨ìˆ˜ë“¤

### í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼

- `src/pages/project/community/tabs/FeedbackTab.tsx` - í”¼ë“œë°± íƒ­ ì»´í¬ë„ŒíŠ¸
- `src/pages/project/FeedbackDetailPage.tsx` - í”¼ë“œë°± ìƒì„¸ í˜ì´ì§€
- `src/pages/project/community/tabs/hooks/useDevFeedComments.ts` - ëŒ“ê¸€ ê´€ë¦¬ Hook
- `src/pages/project/community/types.ts` - íƒ€ì… ì •ì˜
- `src/pages/project/community/constants.ts` - ìƒìˆ˜ ì •ì˜

### íƒ€ì… ì •ì˜

```typescript
interface UserFeedback {
  id: string; // post_id
  feedbackId: string; // ì‹¤ì œ feedback_id
  type: "bug" | "feature" | "improvement" | "question";
  title: string;
  content: string;
  images?: string[];
  author: {
    id: string;
    username: string;
    displayName: string;
    avatar?: string;
  };
  status: "open" | "in_progress" | "resolved" | "closed";
  priority?: "low" | "medium" | "high" | "critical";
  assignee?: {
    id: string;
    username: string;
    displayName: string;
  };
  developerResponse?: string;
  votesCount: number;
  isVoted: boolean;
  commentsCount: number;
  createdAt: string;
}
```

---

## ì„±ëŠ¥ ìµœì í™”

### ì¸ë±ìŠ¤ í™œìš©

- í”¼ë“œë°± íƒ€ì…ë³„ ì¡°íšŒ: `idx_tbl_feedbacks_type`
- ìƒíƒœë³„ ì¡°íšŒ: `idx_tbl_feedbacks_status`
- ìš°ì„ ìˆœìœ„ë³„ ì¡°íšŒ: `idx_tbl_feedbacks_priority`
- ë‹´ë‹¹ìë³„ ì¡°íšŒ: `idx_tbl_feedbacks_assignee`
- ê³ ì • í”¼ë“œë°± ì¡°íšŒ: `idx_tbl_feedbacks_pinned`
- íˆ¬í‘œìˆ˜ ì •ë ¬: `idx_tbl_feedbacks_votes`

### ë¹„ì •ê·œí™”

- `votes_count`ëŠ” ë¹„ì •ê·œí™”ë˜ì–´ ì €ì¥
- íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ë™ê¸°í™”
- ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ (JOIN ë¶ˆí•„ìš”)

### í˜ì´ì§€ë„¤ì´ì…˜

- `limit`ê³¼ `offset`ì„ ì‚¬ìš©í•œ í˜ì´ì§€ë„¤ì´ì…˜
- ê¸°ë³¸ `limit`: 30
- ìµœëŒ€ `limit`: 100

---

## í–¥í›„ í™•ì¥ ê°€ëŠ¥ ê¸°ëŠ¥

### í”¼ë“œë°± ê´€ë ¨
- í”¼ë“œë°± ê²€ìƒ‰ ê¸°ëŠ¥
- í”¼ë“œë°± ì•Œë¦¼ ê¸°ëŠ¥
- í”¼ë“œë°± ì´ë ¥ ì¶”ì 
- í”¼ë“œë°± í†µê³„ ëŒ€ì‹œë³´ë“œ

### ê´€ë¦¬ ê¸°ëŠ¥
- ì¼ê´„ ìƒíƒœ ë³€ê²½
- ì¼ê´„ ë‹´ë‹¹ì ì§€ì •
- í”¼ë“œë°± í…œí”Œë¦¿ ê¸°ëŠ¥
- í”¼ë“œë°± ìš°ì„ ìˆœìœ„ ìë™ ê³„ì‚°

### ëŒ“ê¸€ ê´€ë ¨
- ëŒ“ê¸€ ì‹ ê³  ê¸°ëŠ¥
- ëŒ“ê¸€ ê³ ì • ê¸°ëŠ¥ (ì‘ì„±ì ì „ìš©)
- ëŒ“ê¸€ ê²€ìƒ‰ ê¸°ëŠ¥

---

## ì°¸ê³ ì‚¬í•­

### ë°ì´í„° í˜•ì‹

- **ì´ë¯¸ì§€ ë°°ì—´**: JSONB ë°°ì—´ í˜•ì‹, ì˜ˆ: `["url1", "url2"]`
- **ë‚ ì§œ/ì‹œê°„**: ISO 8601 í˜•ì‹ (timestamptz)

### íŠ¸ë¦¬ê±° ë™ì‘

- ëª¨ë“  ì¹´ìš´íŠ¸(`votes_count`)ëŠ” íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ ë™ê¸°í™”
- `updated_at`ì€ íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ ì—…ë°ì´íŠ¸

### ì†Œí”„íŠ¸ ì‚­ì œ

- í”¼ë“œë°±ì€ ì†Œí”„íŠ¸ ì‚­ì œë¡œ ì²˜ë¦¬ (`is_deleted = true`)
- ì‚­ì œëœ í”¼ë“œë°±ì€ ëª©ë¡ì—ì„œ ì œì™¸

### í”¼ë“œë°± ID vs í¬ìŠ¤íŠ¸ ID

- `feedback_id`: ì‹¤ì œ í”¼ë“œë°± ID (`tbl_feedbacks.id`)
- `post_id`: í¬ìŠ¤íŠ¸ ID (`tbl_posts.id`)
- ë¼ìš°íŒ…ì—ëŠ” `post_id` ì‚¬ìš©
- íˆ¬í‘œ ë“± í”¼ë“œë°± ì „ìš© ì‘ì—…ì—ëŠ” `feedback_id` ì‚¬ìš©






