# ì»¤ë®¤ë‹ˆí‹° ê³µì§€ ì‹œìŠ¤í…œ

## ê°œìš”

í”„ë¡œì íŠ¸ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ê°œë°œíŒ€ì´ ê³µì§€ì‚¬í•­, ì—…ë°ì´íŠ¸, íˆ¬í‘œë¥¼ ì‘ì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ìƒì„±ìë§Œ ê³µì§€ë¥¼ ì‘ì„±/ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆìœ¼ë©°, ì¼ë°˜ ì‚¬ìš©ìëŠ” ì¡°íšŒ ë° ëŒ“ê¸€ ì‘ì„±ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- **í¬ìŠ¤íŠ¸ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ**: ê³µì§€ì‚¬í•­, ì—…ë°ì´íŠ¸, íˆ¬í‘œ í¬ìŠ¤íŠ¸ ê´€ë¦¬
- **ìƒë‹¨ ê³ ì • ê¸°ëŠ¥**: ì¤‘ìš”í•œ ê³µì§€ë¥¼ ìƒë‹¨ì— ê³ ì •
- **ì´ë¯¸ì§€ ì²¨ë¶€**: ìµœëŒ€ 3ê°œ ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥
- **íˆ¬í‘œ ê¸°ëŠ¥**: íˆ¬í‘œ íƒ€ì… í¬ìŠ¤íŠ¸ì—ì„œ ìµœì†Œ 2ê°œ, ìµœëŒ€ 5ê°œ ì˜µì…˜ ì œê³µ
- **ëŒ“ê¸€ ì‹œìŠ¤í…œ**: í¬ìŠ¤íŠ¸ë³„ ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ (ìµœëŒ€ 3ë‹¨ê³„ ê¹Šì´)
- **í•„í„°ë§**: ì „ì²´/ê³µì§€/ì—…ë°ì´íŠ¸/íˆ¬í‘œ íƒ€ì…ë³„ í•„í„°ë§
- **í˜ì´ì§€ë„¤ì´ì…˜**: 30ê°œì”© í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 1. ê³µì§€ì‚¬í•­/ì—…ë°ì´íŠ¸/íˆ¬í‘œ í¬ìŠ¤íŠ¸ íŒŒìƒ í…Œì´ë¸” (`odd.tbl_post_announcements`)

ê³µì§€ì‚¬í•­, ì—…ë°ì´íŠ¸, íˆ¬í‘œ í¬ìŠ¤íŠ¸ì˜ ì¶”ê°€ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤. `tbl_posts`ì™€ 1:1 ê´€ê³„ì…ë‹ˆë‹¤.

#### ìŠ¤í‚¤ë§ˆ

```sql
CREATE TABLE odd.tbl_post_announcements (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    post_id uuid NOT NULL REFERENCES odd.tbl_posts(id) ON DELETE CASCADE,
    
    -- í¬ìŠ¤íŠ¸ ì •ë³´
    title text NOT NULL,  -- ì œëª©
    post_type text NOT NULL CHECK (post_type IN ('announcement', 'update', 'vote')),  -- í¬ìŠ¤íŠ¸ íƒ€ì…
    
    -- ìƒíƒœ
    is_pinned boolean DEFAULT false NOT NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at timestamptz DEFAULT now() NOT NULL,
    updated_at timestamptz DEFAULT now() NOT NULL,
    
    -- í•˜ë‚˜ì˜ í¬ìŠ¤íŠ¸ëŠ” í•˜ë‚˜ì˜ announcementë§Œ ê°€ì§ˆ ìˆ˜ ìˆìŒ
    UNIQUE(post_id)
);
```

#### ì£¼ìš” ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `id` | uuid | âœ… | ê³ ìœ  ID (ìë™ ìƒì„±) |
| `post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID (`odd.tbl_posts.id` ì°¸ì¡°) |
| `title` | text | âœ… | ì œëª© |
| `post_type` | text | âœ… | í¬ìŠ¤íŠ¸ íƒ€ì…: `announcement`, `update`, `vote` |
| `is_pinned` | boolean | âœ… | ìƒë‹¨ ê³ ì • ì—¬ë¶€ |
| `created_at` | timestamptz | âœ… | ìƒì„±ì¼ì‹œ |
| `updated_at` | timestamptz | âœ… | ìˆ˜ì •ì¼ì‹œ (íŠ¸ë¦¬ê±°ë¡œ ìë™ ì—…ë°ì´íŠ¸) |

#### ì¸ë±ìŠ¤

| ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | ìš©ë„ |
|---------|------|------|
| `idx_tbl_post_announcements_post_id` | `post_id` | í¬ìŠ¤íŠ¸ IDë¡œ ì¡°íšŒ |
| `idx_tbl_post_announcements_type` | `post_type` | í¬ìŠ¤íŠ¸ íƒ€ì…ë³„ ì¡°íšŒ |
| `idx_tbl_post_announcements_pinned` | `is_pinned` (WHERE `is_pinned = true`) | ê³ ì •ëœ í¬ìŠ¤íŠ¸ ì¡°íšŒ |

---

### 2. íˆ¬í‘œ ì˜µì…˜ í…Œì´ë¸” (`odd.tbl_post_votes`)

íˆ¬í‘œ í¬ìŠ¤íŠ¸ì˜ ì˜µì…˜ì„ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ íˆ¬í‘œ í¬ìŠ¤íŠ¸ëŠ” ì—¬ëŸ¬ ê°œì˜ ì˜µì…˜ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ìŠ¤í‚¤ë§ˆ

```sql
CREATE TABLE odd.tbl_post_votes (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    post_id uuid NOT NULL REFERENCES odd.tbl_posts(id) ON DELETE CASCADE,
    
    -- ì˜µì…˜ ì •ë³´
    option_text text NOT NULL,  -- ì˜µì…˜ í…ìŠ¤íŠ¸ (ìµœëŒ€ 50ì)
    sort_order integer NOT NULL DEFAULT 0,  -- ì •ë ¬ ìˆœì„œ
    
    -- í†µê³„ (ë¹„ì •ê·œí™”)
    votes_count integer DEFAULT 0 NOT NULL,
    
    -- íƒ€ì„ìŠ¤íƒ¬í”„
    created_at timestamptz DEFAULT now() NOT NULL,
    updated_at timestamptz DEFAULT now() NOT NULL
);
```

#### ì£¼ìš” ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `id` | uuid | âœ… | ê³ ìœ  ID (ìë™ ìƒì„±) |
| `post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID (`odd.tbl_posts.id` ì°¸ì¡°) |
| `option_text` | text | âœ… | ì˜µì…˜ í…ìŠ¤íŠ¸ |
| `sort_order` | integer | âœ… | ì •ë ¬ ìˆœì„œ (0ë¶€í„° ì‹œì‘) |
| `votes_count` | integer | âœ… | íˆ¬í‘œ ìˆ˜ (ë¹„ì •ê·œí™”, íŠ¸ë¦¬ê±°ë¡œ ìë™ ë™ê¸°í™”) |
| `created_at` | timestamptz | âœ… | ìƒì„±ì¼ì‹œ |
| `updated_at` | timestamptz | âœ… | ìˆ˜ì •ì¼ì‹œ (íŠ¸ë¦¬ê±°ë¡œ ìë™ ì—…ë°ì´íŠ¸) |

#### ì¸ë±ìŠ¤

| ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | ìš©ë„ |
|---------|------|------|
| `idx_tbl_post_votes_post_id` | `post_id, sort_order` | í¬ìŠ¤íŠ¸ë³„ íˆ¬í‘œ ì˜µì…˜ ì¡°íšŒ (ì •ë ¬ ìˆœì„œ ê¸°ì¤€) |

---

### 3. íˆ¬í‘œ ì‘ë‹µ í…Œì´ë¸” (`odd.tbl_post_vote_responses`)

ì‚¬ìš©ìì˜ íˆ¬í‘œ ì‘ë‹µì„ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤. í•œ ì‚¬ìš©ìëŠ” í•œ í¬ìŠ¤íŠ¸ì— í•˜ë‚˜ì˜ íˆ¬í‘œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### ìŠ¤í‚¤ë§ˆ

```sql
CREATE TABLE odd.tbl_post_vote_responses (
    id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    post_id uuid NOT NULL REFERENCES odd.tbl_posts(id) ON DELETE CASCADE,
    vote_option_id uuid NOT NULL REFERENCES odd.tbl_post_votes(id) ON DELETE CASCADE,
    user_id bigint NOT NULL REFERENCES odd.tbl_users(id) ON DELETE CASCADE,
    
    created_at timestamptz DEFAULT now() NOT NULL,
    
    -- í•œ ì‚¬ìš©ìëŠ” í•œ í¬ìŠ¤íŠ¸ì— í•˜ë‚˜ì˜ íˆ¬í‘œë§Œ ê°€ëŠ¥
    UNIQUE(post_id, user_id)
);
```

#### ì£¼ìš” ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `id` | uuid | âœ… | ê³ ìœ  ID (ìë™ ìƒì„±) |
| `post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID (`odd.tbl_posts.id` ì°¸ì¡°) |
| `vote_option_id` | uuid | âœ… | íˆ¬í‘œ ì˜µì…˜ ID (`odd.tbl_post_votes.id` ì°¸ì¡°) |
| `user_id` | bigint | âœ… | íˆ¬í‘œí•œ ì‚¬ìš©ì ID (`odd.tbl_users.id` ì°¸ì¡°) |
| `created_at` | timestamptz | âœ… | ìƒì„±ì¼ì‹œ |

#### ì¸ë±ìŠ¤

| ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | ìš©ë„ |
|---------|------|------|
| `idx_tbl_post_vote_responses_post_id` | `post_id` | í¬ìŠ¤íŠ¸ë³„ íˆ¬í‘œ ì‘ë‹µ ì¡°íšŒ |
| `idx_tbl_post_vote_responses_option_id` | `vote_option_id` | ì˜µì…˜ë³„ íˆ¬í‘œ ì‘ë‹µ ì¡°íšŒ |
| `idx_tbl_post_vote_responses_user_id` | `user_id` | ì‚¬ìš©ìë³„ íˆ¬í‘œ ì¡°íšŒ |

#### íŠ¸ë¦¬ê±°

- **`trigger_increment_post_vote_option_count`**: íˆ¬í‘œ ì‘ë‹µ ì¶”ê°€ ì‹œ ì˜µì…˜ì˜ `votes_count` ì¦ê°€
- **`trigger_decrement_post_vote_option_count`**: íˆ¬í‘œ ì‘ë‹µ ì‚­ì œ ì‹œ ì˜µì…˜ì˜ `votes_count` ê°ì†Œ

---

## RPC í•¨ìˆ˜

### 1. ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ ì¡°íšŒ (`odd.v1_fetch_community_posts`)

ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ê³µì§€ì‚¬í•­, ì—…ë°ì´íŠ¸, íˆ¬í‘œ í¬ìŠ¤íŠ¸ë¥¼ í¬í•¨í•˜ë©° íˆ¬í‘œ ì •ë³´ë„ í•¨ê»˜ ë°˜í™˜í•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_fetch_community_posts(
    p_project_id uuid,
    p_post_type text DEFAULT NULL,
    p_limit integer DEFAULT 30,
    p_offset integer DEFAULT 0
)
RETURNS TABLE (
    -- í¬ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´
    id uuid,
    author_id bigint,
    type text,
    content text,
    images jsonb,
    likes_count integer,
    comments_count integer,
    is_pinned boolean,
    created_at timestamptz,
    updated_at timestamptz,
    -- ì‘ì„±ì ì •ë³´
    author_username text,
    author_display_name text,
    author_avatar_url text,
    -- í˜„ì¬ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ìƒíƒœ
    is_liked boolean,
    -- ê³µì§€ì‚¬í•­ ì •ë³´
    title text,
    post_type text,
    -- íˆ¬í‘œ ì •ë³´ (íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ)
    vote_options jsonb,
    voted_option_id uuid,
    total_votes integer
)
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_project_id` | uuid | âœ… | í”„ë¡œì íŠ¸ ID |
| `p_post_type` | text | - | í¬ìŠ¤íŠ¸ íƒ€ì… í•„í„°: `announcement`, `update`, `vote` (NULLì´ë©´ ëª¨ë“  íƒ€ì…) |
| `p_limit` | integer | - | ì¡°íšŒ ê°œìˆ˜ ì œí•œ (ê¸°ë³¸ê°’: 30, ìµœëŒ€: 100) |
| `p_offset` | integer | - | í˜ì´ì§€ë„¤ì´ì…˜ ì˜¤í”„ì…‹ (ê¸°ë³¸ê°’: 0) |

#### ë°˜í™˜ ë°ì´í„° êµ¬ì¡°

```typescript
interface CommunityPost {
  // í¬ìŠ¤íŠ¸ ê¸°ë³¸ ì •ë³´
  id: string;
  author_id: number;
  type: string;
  content: string;
  images: string[];
  likes_count: number;
  comments_count: number;
  is_pinned: boolean;
  created_at: string;
  updated_at: string;
  
  // ì‘ì„±ì ì •ë³´
  author_username: string;
  author_display_name: string;
  author_avatar_url?: string;
  
  // í˜„ì¬ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ìƒíƒœ
  is_liked: boolean;
  
  // ê³µì§€ì‚¬í•­ ì •ë³´
  title: string;
  post_type: 'announcement' | 'update' | 'vote';
  
  // íˆ¬í‘œ ì •ë³´ (íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ)
  vote_options?: Array<{
    id: string;
    text: string;
    votesCount: number;
    sortOrder: number;
  }>;
  voted_option_id?: string;
  total_votes?: number;
}
```

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// ì „ì²´ í¬ìŠ¤íŠ¸ ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_community_posts', {
    p_project_id: 'project-uuid-here',
    p_limit: 30,
    p_offset: 0
  });

// ê³µì§€ì‚¬í•­ë§Œ ì¡°íšŒ
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_fetch_community_posts', {
    p_project_id: 'project-uuid-here',
    p_post_type: 'announcement',
    p_limit: 30,
    p_offset: 0
  });
```

#### ì •ë ¬ ê·œì¹™

1. ê³ ì •ëœ í¬ìŠ¤íŠ¸ë¥¼ ë¨¼ì € í‘œì‹œ (`is_pinned DESC`)
2. ìµœì‹ ìˆœ ì •ë ¬ (`created_at DESC`)

---

### 2. ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ ìƒì„± (`odd.v1_create_community_post`)

ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì™€ ê³µì§€ì‚¬í•­ ì •ë³´ë¥¼ í•¨ê»˜ ìƒì„±í•˜ë©°, íˆ¬í‘œ íƒ€ì…ì¼ ê²½ìš° íˆ¬í‘œ ì˜µì…˜ë„ í•¨ê»˜ ìƒì„±í•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_create_community_post(
    p_project_id uuid,
    p_post_type text,  -- 'announcement' | 'update' | 'vote'
    p_title text,
    p_content text,
    p_images jsonb DEFAULT '[]'::jsonb,
    p_is_pinned boolean DEFAULT false,
    p_vote_options text[] DEFAULT NULL  -- íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ ì‚¬ìš© (ìµœì†Œ 2ê°œ, ìµœëŒ€ 5ê°œ)
)
RETURNS uuid
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_project_id` | uuid | âœ… | í”„ë¡œì íŠ¸ ID |
| `p_post_type` | text | âœ… | í¬ìŠ¤íŠ¸ íƒ€ì…: `announcement`, `update`, `vote` |
| `p_title` | text | âœ… | ì œëª© |
| `p_content` | text | âœ… | ë‚´ìš© |
| `p_images` | jsonb | - | ì´ë¯¸ì§€ URL ë°°ì—´ (ìµœëŒ€ 3ê°œ) |
| `p_is_pinned` | boolean | - | ìƒë‹¨ ê³ ì • ì—¬ë¶€ (ê¸°ë³¸ê°’: false) |
| `p_vote_options` | text[] | - | íˆ¬í‘œ ì˜µì…˜ ë°°ì—´ (íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ, ìµœì†Œ 2ê°œ, ìµœëŒ€ 5ê°œ) |

#### ê²€ì¦ ê·œì¹™

- í¬ìŠ¤íŠ¸ íƒ€ì…ì´ ìœ íš¨í•œì§€ í™•ì¸ (`announcement`, `update`, `vote`)
- íˆ¬í‘œ íƒ€ì…ì¼ ê²½ìš° ì˜µì…˜ì´ ìµœì†Œ 2ê°œ, ìµœëŒ€ 5ê°œì¸ì§€ í™•ì¸
- ì´ë¯¸ì§€ ê°œìˆ˜ê°€ 3ê°œ ì´í•˜ì¸ì§€ í™•ì¸
- í”„ë¡œì íŠ¸ ì‘ì„±ìë§Œ í¬ìŠ¤íŠ¸ ìƒì„± ê°€ëŠ¥

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// ê³µì§€ì‚¬í•­ ìƒì„±
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_create_community_post', {
    p_project_id: 'project-uuid-here',
    p_post_type: 'announcement',
    p_title: 'ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶œì‹œ ì•ˆë‚´',
    p_content: 'ë‹¤ìŒ ì£¼ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶œì‹œë©ë‹ˆë‹¤.',
    p_images: ['url1', 'url2'],
    p_is_pinned: true
  });

// íˆ¬í‘œ í¬ìŠ¤íŠ¸ ìƒì„±
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_create_community_post', {
    p_project_id: 'project-uuid-here',
    p_post_type: 'vote',
    p_title: 'ë‹¤ìŒ ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„ íˆ¬í‘œ',
    p_content: 'ë‹¤ìŒì— êµ¬í˜„í•  ê¸°ëŠ¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.',
    p_vote_options: ['ë‹¤í¬ëª¨ë“œ', 'ë‹¤êµ­ì–´ ì§€ì›', 'ì•Œë¦¼ ê¸°ëŠ¥', 'ê²€ìƒ‰ ê¸°ëŠ¥']
  });
```

---

### 3. ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ ìˆ˜ì • (`odd.v1_update_community_post`)

ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì‘ì„±ìë§Œ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_update_community_post(
    p_post_id uuid,
    p_title text DEFAULT NULL,
    p_content text DEFAULT NULL,
    p_images jsonb DEFAULT NULL,
    p_is_pinned boolean DEFAULT NULL,
    p_vote_options text[] DEFAULT NULL  -- íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ ì‚¬ìš©
)
RETURNS boolean
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID |
| `p_title` | text | - | ì œëª© (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_content` | text | - | ë‚´ìš© (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_images` | jsonb | - | ì´ë¯¸ì§€ URL ë°°ì—´ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_is_pinned` | boolean | - | ìƒë‹¨ ê³ ì • ì—¬ë¶€ (NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |
| `p_vote_options` | text[] | - | íˆ¬í‘œ ì˜µì…˜ ë°°ì—´ (íˆ¬í‘œ íƒ€ì…ì¼ ë•Œë§Œ, NULLì´ë©´ ë³€ê²½í•˜ì§€ ì•ŠìŒ) |

#### ê¶Œí•œ

- ì‘ì„±ìë§Œ ìˆ˜ì • ê°€ëŠ¥

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// í¬ìŠ¤íŠ¸ ìˆ˜ì •
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_update_community_post', {
    p_post_id: 'post-uuid-here',
    p_title: 'ìˆ˜ì •ëœ ì œëª©',
    p_content: 'ìˆ˜ì •ëœ ë‚´ìš©',
    p_images: ['url1', 'url2', 'url3']
  });
```

---

### 4. íˆ¬í‘œ ì‘ë‹µ ìƒì„± (`odd.v1_create_vote_response`)

íˆ¬í‘œ í¬ìŠ¤íŠ¸ì— íˆ¬í‘œ ì‘ë‹µì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. í•œ ì‚¬ìš©ìëŠ” í•œ í¬ìŠ¤íŠ¸ì— í•˜ë‚˜ì˜ íˆ¬í‘œë§Œ ê°€ëŠ¥í•˜ë©°, ê¸°ì¡´ íˆ¬í‘œê°€ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

#### í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜

```sql
CREATE OR REPLACE FUNCTION odd.v1_create_vote_response(
    p_post_id uuid,
    p_vote_option_id uuid
)
RETURNS boolean
```

#### ë§¤ê°œë³€ìˆ˜

| ë§¤ê°œë³€ìˆ˜ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|---------|------|------|------|
| `p_post_id` | uuid | âœ… | í¬ìŠ¤íŠ¸ ID |
| `p_vote_option_id` | uuid | âœ… | íˆ¬í‘œ ì˜µì…˜ ID |

#### ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { supabase } from "@/shared/lib/supabase";

// íˆ¬í‘œ ì‘ë‹µ ìƒì„±
const { data, error } = await supabase
  .schema('odd')
  .rpc('v1_create_vote_response', {
    p_post_id: 'post-uuid-here',
    p_vote_option_id: 'option-uuid-here'
  });
```

---

## í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš© ë°©ë²•

### 1. í¬ìŠ¤íŠ¸ ëª©ë¡ ì¡°íšŒ

```typescript
import { supabase } from "@/shared/lib/supabase";

async function fetchCommunityPosts(projectId: string, postType?: string, limit = 30, offset = 0) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_fetch_community_posts', {
      p_project_id: projectId,
      p_post_type: postType || null,
      p_limit: limit,
      p_offset: offset
    });

  if (error) {
    console.error('í¬ìŠ¤íŠ¸ ì¡°íšŒ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 2. í¬ìŠ¤íŠ¸ ìƒì„±

```typescript
import { supabase } from "@/shared/lib/supabase";
import { uploadPostImages } from "@/shared/lib/storage";

async function createCommunityPost(postData: {
  projectId: string;
  postType: 'announcement' | 'update' | 'vote';
  title: string;
  content: string;
  images?: File[];
  isPinned?: boolean;
  voteOptions?: string[];
}) {
  // ì´ë¯¸ì§€ ì—…ë¡œë“œ
  let imagePaths: string[] = [];
  if (postData.images && postData.images.length > 0) {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
      return { error: new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') };
    }

    const tempPostId = `temp-${Date.now()}`;
    const { paths, error: uploadError } = await uploadPostImages(
      postData.images,
      user.id,
      tempPostId
    );

    if (uploadError) {
      return { error: uploadError };
    }

    imagePaths = paths;
  }

  // í¬ìŠ¤íŠ¸ ìƒì„±
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_create_community_post', {
      p_project_id: postData.projectId,
      p_post_type: postData.postType,
      p_title: postData.title,
      p_content: postData.content,
      p_images: imagePaths,
      p_is_pinned: postData.isPinned || false,
      p_vote_options: postData.voteOptions || null
    });

  if (error) {
    console.error('í¬ìŠ¤íŠ¸ ìƒì„± ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 3. í¬ìŠ¤íŠ¸ ìˆ˜ì •

```typescript
import { supabase } from "@/shared/lib/supabase";

async function updateCommunityPost(postId: string, updates: {
  title?: string;
  content?: string;
  images?: string[];
  isPinned?: boolean;
  voteOptions?: string[];
}) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_update_community_post', {
      p_post_id: postId,
      p_title: updates.title || null,
      p_content: updates.content || null,
      p_images: updates.images || null,
      p_is_pinned: updates.isPinned !== undefined ? updates.isPinned : null,
      p_vote_options: updates.voteOptions || null
    });

  if (error) {
    console.error('í¬ìŠ¤íŠ¸ ìˆ˜ì • ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

### 4. í¬ìŠ¤íŠ¸ ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ)

```typescript
import { supabase } from "@/shared/lib/supabase";

async function deleteCommunityPost(postId: string) {
  const { error } = await supabase
    .schema('odd')
    .from('tbl_posts')
    .update({ is_deleted: true })
    .eq('id', postId);

  if (error) {
    console.error('í¬ìŠ¤íŠ¸ ì‚­ì œ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { success: true };
}
```

### 5. í¬ìŠ¤íŠ¸ ê³ ì • í† ê¸€

```typescript
import { supabase } from "@/shared/lib/supabase";

async function togglePinPost(postId: string, isPinned: boolean) {
  const { error } = await supabase
    .schema('odd')
    .from('tbl_posts')
    .update({ is_pinned: isPinned })
    .eq('id', postId);

  if (error) {
    console.error('ê³ ì • ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:', error);
    return { error };
  }

  return { success: true };
}
```

### 6. íˆ¬í‘œ ì‘ë‹µ ìƒì„±

```typescript
import { supabase } from "@/shared/lib/supabase";

async function createVoteResponse(postId: string, voteOptionId: string) {
  const { data, error } = await supabase
    .schema('odd')
    .rpc('v1_create_vote_response', {
      p_post_id: postId,
      p_vote_option_id: voteOptionId
    });

  if (error) {
    console.error('íˆ¬í‘œ ì‘ë‹µ ìƒì„± ì‹¤íŒ¨:', error);
    return { error };
  }

  return { data };
}
```

---

## UI/UX ê°€ì´ë“œë¼ì¸

### í¬ìŠ¤íŠ¸ íƒ€ì…ë³„ í‘œì‹œ

#### ê³µì§€ì‚¬í•­ (Announcement)
- ì•„ì´ì½˜: ğŸ“¢ (Megaphone)
- ìƒ‰ìƒ: Primary ìƒ‰ìƒ
- ë°°ì§€: "ê³µì§€" ë°°ì§€ í‘œì‹œ

#### ì—…ë°ì´íŠ¸ (Update)
- ì•„ì´ì½˜: âœ¨ (Sparkles)
- ìƒ‰ìƒ: Emerald ìƒ‰ìƒ
- ë°°ì§€: "ì—…ë°ì´íŠ¸" ë°°ì§€ í‘œì‹œ

#### íˆ¬í‘œ (Vote)
- ì•„ì´ì½˜: ğŸ‘ (ThumbsUp)
- ìƒ‰ìƒ: Amber ìƒ‰ìƒ
- ë°°ì§€: "íˆ¬í‘œ" ë°°ì§€ í‘œì‹œ
- íˆ¬í‘œ ì˜µì…˜ê³¼ ê²°ê³¼ í‘œì‹œ

### ê³ ì • í¬ìŠ¤íŠ¸ í‘œì‹œ

- ê³ ì •ëœ í¬ìŠ¤íŠ¸ëŠ” ìƒë‹¨ì— í‘œì‹œ
- "ê³ ì •ë¨" ë°°ì§€ í‘œì‹œ
- ê³ ì • ì•„ì´ì½˜ (Pin) í‘œì‹œ

### íˆ¬í‘œ UI

- íˆ¬í‘œ ì˜µì…˜ì€ ë¼ë””ì˜¤ ë²„íŠ¼ ë˜ëŠ” ë²„íŠ¼ í˜•íƒœë¡œ í‘œì‹œ
- ê° ì˜µì…˜ì˜ íˆ¬í‘œ ìˆ˜ì™€ ë¹„ìœ¨ í‘œì‹œ
- ì‚¬ìš©ìê°€ íˆ¬í‘œí•œ ì˜µì…˜ ê°•ì¡° í‘œì‹œ
- ì´ íˆ¬í‘œ ìˆ˜ í‘œì‹œ

### ëŒ“ê¸€ ì‹œìŠ¤í…œ

- í¬ìŠ¤íŠ¸ë³„ ëŒ“ê¸€ ì‹œìŠ¤í…œ ì‚¬ìš© (`useDevFeedComments` hook)
- ìµœëŒ€ 3ë‹¨ê³„ ê¹Šì´ì˜ ì¤‘ì²© ëŒ“ê¸€ ì§€ì›
- ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥ (ìµœëŒ€ 1ì¥)
- ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ/ì¢‹ì•„ìš” ê¸°ëŠ¥

---

## ë³´ì•ˆ ë° ê¶Œí•œ (RLS)

### í¬ìŠ¤íŠ¸ í…Œì´ë¸” (`odd.tbl_posts`)

#### ì½ê¸° ê¶Œí•œ
- ëª¨ë“  ì‚¬ìš©ì(ê³µê°œ)ê°€ ì‚­ì œë˜ì§€ ì•Šì€ í¬ìŠ¤íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆìŒ
- ì •ì±…: `"Anyone can read active posts"` (SELECT, TO public, USING (`is_deleted = false`))

#### ì“°ê¸° ê¶Œí•œ

**í¬ìŠ¤íŠ¸ ìƒì„± (INSERT):**
- í”„ë¡œì íŠ¸ ì‘ì„±ìë§Œ í¬ìŠ¤íŠ¸ ìƒì„± ê°€ëŠ¥
- ì •ì±…: `"Authenticated users can create posts"` (INSERT, TO authenticated)
- í•¨ìˆ˜ ë‚´ì—ì„œ í”„ë¡œì íŠ¸ ì‘ì„±ì í™•ì¸

**í¬ìŠ¤íŠ¸ ìˆ˜ì • (UPDATE):**
- ì‘ì„±ìë§Œ ìì‹ ì˜ í¬ìŠ¤íŠ¸ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŒ
- ì •ì±…: `"Users can update own posts"` (UPDATE, TO authenticated)

**í¬ìŠ¤íŠ¸ ì‚­ì œ (DELETE):**
- ì‘ì„±ìë§Œ ìì‹ ì˜ í¬ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŒ
- ì •ì±…: `"Users can delete own posts"` (DELETE, TO authenticated)

### ê³µì§€ì‚¬í•­ í…Œì´ë¸” (`odd.tbl_post_announcements`)

#### ì½ê¸° ê¶Œí•œ
- ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ
- ì •ì±…: `"Anyone can read post announcements"` (SELECT, TO public)

#### ì“°ê¸° ê¶Œí•œ
- ì¸ì¦ëœ ì‚¬ìš©ìê°€ ìƒì„± ê°€ëŠ¥ (ê¶Œí•œ ì²´í¬ëŠ” í•¨ìˆ˜ì—ì„œ ìˆ˜í–‰)
- ì‘ì„±ìë§Œ ìˆ˜ì • ê°€ëŠ¥ (ê¶Œí•œ ì²´í¬ëŠ” í•¨ìˆ˜ì—ì„œ ìˆ˜í–‰)

### íˆ¬í‘œ ì‘ë‹µ í…Œì´ë¸” (`odd.tbl_post_vote_responses`)

#### ì½ê¸° ê¶Œí•œ
- ëª¨ë“  ì‚¬ìš©ìê°€ ì½ì„ ìˆ˜ ìˆìŒ
- ì •ì±…: `"Anyone can read post vote responses"` (SELECT, TO public)

#### ì“°ê¸° ê¶Œí•œ
- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íˆ¬í‘œ ì‘ë‹µ ìƒì„± ê°€ëŠ¥
- ìì‹ ì˜ íˆ¬í‘œë§Œ ì‚­ì œ ê°€ëŠ¥

---

## ì—ëŸ¬ ì²˜ë¦¬

### ì¼ë°˜ì ì¸ ì—ëŸ¬

#### ì¸ì¦ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤"`
- **ì›ì¸**: ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ ì¸ì¦ì´ í•„ìš”í•œ ì‘ì—…ì„ ì‹œë„
- **í•´ê²°**: ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

#### ê¶Œí•œ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"í”„ë¡œì íŠ¸ ì‘ì„±ìë§Œ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"`
- **ì›ì¸**: í”„ë¡œì íŠ¸ ì‘ì„±ìê°€ ì•„ë‹Œ ì‚¬ìš©ìê°€ í¬ìŠ¤íŠ¸ ì‘ì„± ì‹œë„
- **í•´ê²°**: ê¶Œí•œ í™•ì¸ í›„ ì‘ì—… ìˆ˜í–‰

### í¬ìŠ¤íŠ¸ ê´€ë ¨ ì—ëŸ¬

#### í¬ìŠ¤íŠ¸ íƒ€ì… ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ìœ íš¨í•˜ì§€ ì•Šì€ í¬ìŠ¤íŠ¸ íƒ€ì…ì…ë‹ˆë‹¤: {type}"`
- **ì›ì¸**: í—ˆìš©ë˜ì§€ ì•Šì€ í¬ìŠ¤íŠ¸ íƒ€ì… ì‚¬ìš©
- **í•´ê²°**: ìœ íš¨í•œ íƒ€ì… ì‚¬ìš©: `announcement`, `update`, `vote`

#### ì´ë¯¸ì§€ ê°œìˆ˜ ì´ˆê³¼
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"ì´ë¯¸ì§€ëŠ” ìµœëŒ€ 3ì¥ê¹Œì§€ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"`
- **ì›ì¸**: í¬ìŠ¤íŠ¸ì— 4ì¥ ì´ìƒì˜ ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œë„
- **í•´ê²°**: ì´ë¯¸ì§€ ê°œìˆ˜ ì œí•œ ì¤€ìˆ˜

#### íˆ¬í‘œ ì˜µì…˜ ì—ëŸ¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: `"íˆ¬í‘œ ì˜µì…˜ì€ ìµœì†Œ 2ê°œ, ìµœëŒ€ 5ê°œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤"`
- **ì›ì¸**: íˆ¬í‘œ íƒ€ì… í¬ìŠ¤íŠ¸ì— ì˜µì…˜ì´ 1ê°œ ì´í•˜ ë˜ëŠ” 6ê°œ ì´ìƒ
- **í•´ê²°**: ì˜µì…˜ ê°œìˆ˜ ì œí•œ ì¤€ìˆ˜

---

## ë°ì´í„° íë¦„

### í¬ìŠ¤íŠ¸ ìƒì„± íë¦„

```
1. ì‚¬ìš©ìê°€ í¬ìŠ¤íŠ¸ ì‘ì„± í¼ ì œì¶œ
   â†“
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„ íƒ)
   â†“
3. v1_create_community_post RPC í•¨ìˆ˜ í˜¸ì¶œ
   â†“
4. ì¸ì¦ í™•ì¸ (auth.uid())
   â†“
5. ì‚¬ìš©ì ID ì¡°íšŒ (tbl_users)
   â†“
6. í”„ë¡œì íŠ¸ ì‘ì„±ì í™•ì¸
   â†“
7. ë°ì´í„° ê²€ì¦ (íƒ€ì…, ì´ë¯¸ì§€ ê°œìˆ˜, íˆ¬í‘œ ì˜µì…˜ ë“±)
   â†“
8. í¬ìŠ¤íŠ¸ ìƒì„± (tbl_posts INSERT)
   â†“
9. ê³µì§€ì‚¬í•­ ì •ë³´ ìƒì„± (tbl_post_announcements INSERT)
   â†“
10. íˆ¬í‘œ ì˜µì…˜ ìƒì„± (íˆ¬í‘œ íƒ€ì…ì¼ ê²½ìš°, tbl_post_votes INSERT)
   â†“
11. í¬ìŠ¤íŠ¸ ID ë°˜í™˜
   â†“
12. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í¬ìŠ¤íŠ¸ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
```

### íˆ¬í‘œ ì‘ë‹µ ìƒì„± íë¦„

```
1. ì‚¬ìš©ìê°€ íˆ¬í‘œ ì˜µì…˜ ì„ íƒ
   â†“
2. v1_create_vote_response RPC í•¨ìˆ˜ í˜¸ì¶œ
   â†“
3. ì¸ì¦ í™•ì¸ (auth.uid())
   â†“
4. ì‚¬ìš©ì ID ì¡°íšŒ (tbl_users)
   â†“
5. ê¸°ì¡´ íˆ¬í‘œ í™•ì¸
   â†“
6. ê¸°ì¡´ íˆ¬í‘œê°€ ìˆìœ¼ë©´ ì‚­ì œ í›„ ìƒˆ íˆ¬í‘œ ì¶”ê°€
   â†“
7. íˆ¬í‘œ ì‘ë‹µ ìƒì„± (tbl_post_vote_responses INSERT)
   â†“
8. íŠ¸ë¦¬ê±° ì‹¤í–‰:
   - ì˜µì…˜ì˜ votes_count ì¦ê°€
   â†“
9. ì„±ê³µ ì—¬ë¶€ ë°˜í™˜
   â†“
10. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ íˆ¬í‘œ ê²°ê³¼ ì—…ë°ì´íŠ¸
```

---

## ê´€ë ¨ íŒŒì¼

### SQL íŒŒì¼

- `docs/sql/023_create_community_tables.sql` - ì»¤ë®¤ë‹ˆí‹° í…Œì´ë¸” ìƒì„±
- `docs/sql/025_v1_community_post_functions.sql` - ì»¤ë®¤ë‹ˆí‹° í¬ìŠ¤íŠ¸ í•¨ìˆ˜ë“¤

### í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼

- `src/pages/project/community/tabs/DevFeedTab.tsx` - ê°œë°œì‚¬ í”¼ë“œ íƒ­ ì»´í¬ë„ŒíŠ¸
- `src/pages/project/community/components/DevPostCard.tsx` - í¬ìŠ¤íŠ¸ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
- `src/pages/project/community/tabs/hooks/useDevFeedComments.ts` - ëŒ“ê¸€ ê´€ë¦¬ Hook
- `src/pages/project/community/types.ts` - íƒ€ì… ì •ì˜
- `src/pages/project/community/constants.ts` - ìƒìˆ˜ ì •ì˜

### íƒ€ì… ì •ì˜

```typescript
interface DevPost {
  id: string;
  type: "announcement" | "update" | "vote";
  title: string;
  content: string;
  images?: string[];
  author: {
    id: string;
    username: string;
    displayName: string;
    avatar?: string;
    role: string; // "Founder" | ""
  };
  isPinned?: boolean;
  likesCount: number;
  isLiked?: boolean;
  commentsCount: number;
  createdAt: string;
  voteOptions?: VoteOption[];
  votedOptionId?: string;
  totalVotes?: number;
}

interface VoteOption {
  id: string;
  text: string;
  votesCount: number;
  sortOrder: number;
}
```

---

## ì„±ëŠ¥ ìµœì í™”

### ì¸ë±ìŠ¤ í™œìš©

- í¬ìŠ¤íŠ¸ íƒ€ì…ë³„ ì¡°íšŒ: `idx_tbl_post_announcements_type`
- ê³ ì • í¬ìŠ¤íŠ¸ ì¡°íšŒ: `idx_tbl_post_announcements_pinned`
- í¬ìŠ¤íŠ¸ë³„ íˆ¬í‘œ ì˜µì…˜ ì¡°íšŒ: `idx_tbl_post_votes_post_id`
- í¬ìŠ¤íŠ¸ë³„ íˆ¬í‘œ ì‘ë‹µ ì¡°íšŒ: `idx_tbl_post_vote_responses_post_id`

### ë¹„ì •ê·œí™”

- `votes_count`ëŠ” ë¹„ì •ê·œí™”ë˜ì–´ ì €ì¥
- íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ë™ê¸°í™”
- ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ (JOIN ë¶ˆí•„ìš”)

### í˜ì´ì§€ë„¤ì´ì…˜

- `limit`ê³¼ `offset`ì„ ì‚¬ìš©í•œ í˜ì´ì§€ë„¤ì´ì…˜
- ê¸°ë³¸ `limit`: 30
- ìµœëŒ€ `limit`: 100

---

## í–¥í›„ í™•ì¥ ê°€ëŠ¥ ê¸°ëŠ¥

### í¬ìŠ¤íŠ¸ ê´€ë ¨
- í¬ìŠ¤íŠ¸ ê²€ìƒ‰ ê¸°ëŠ¥
- í¬ìŠ¤íŠ¸ ê³µìœ  ê¸°ëŠ¥
- í¬ìŠ¤íŠ¸ ì•Œë¦¼ ê¸°ëŠ¥

### íˆ¬í‘œ ê´€ë ¨
- íˆ¬í‘œ ê²°ê³¼ ì°¨íŠ¸ í‘œì‹œ
- íˆ¬í‘œ ê¸°ê°„ ì„¤ì •
- íˆ¬í‘œ ê²°ê³¼ ê³µê°œ/ë¹„ê³µê°œ ì„¤ì •

### ëŒ“ê¸€ ê´€ë ¨
- ëŒ“ê¸€ ì‹ ê³  ê¸°ëŠ¥
- ëŒ“ê¸€ ê³ ì • ê¸°ëŠ¥ (ì‘ì„±ì ì „ìš©)
- ëŒ“ê¸€ ê²€ìƒ‰ ê¸°ëŠ¥

---

## ì°¸ê³ ì‚¬í•­

### ë°ì´í„° í˜•ì‹

- **ì´ë¯¸ì§€ ë°°ì—´**: JSONB ë°°ì—´ í˜•ì‹, ì˜ˆ: `["url1", "url2"]`
- **íˆ¬í‘œ ì˜µì…˜ ë°°ì—´**: í…ìŠ¤íŠ¸ ë°°ì—´ í˜•ì‹, ì˜ˆ: `['ì˜µì…˜1', 'ì˜µì…˜2']`
- **ë‚ ì§œ/ì‹œê°„**: ISO 8601 í˜•ì‹ (timestamptz)

### íŠ¸ë¦¬ê±° ë™ì‘

- ëª¨ë“  ì¹´ìš´íŠ¸(`votes_count`)ëŠ” íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ ë™ê¸°í™”
- `updated_at`ì€ íŠ¸ë¦¬ê±°ë¥¼ í†µí•´ ìë™ ì—…ë°ì´íŠ¸

### ì†Œí”„íŠ¸ ì‚­ì œ

- í¬ìŠ¤íŠ¸ëŠ” ì†Œí”„íŠ¸ ì‚­ì œë¡œ ì²˜ë¦¬ (`is_deleted = true`)
- ì‚­ì œëœ í¬ìŠ¤íŠ¸ëŠ” ëª©ë¡ì—ì„œ ì œì™¸
